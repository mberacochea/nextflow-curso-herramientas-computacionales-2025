/*
 * Pipeline configuration
 */

params {
    // Input/output options
    reference = null
    reads = null
    outdir = "results"
}

// Process resource configuration
process {
    // Default resources for all processes
    cpus = 2
    memory = '4.GB'
    time = '2.h'

    // Process-specific resource allocations
    withName: 'BWA_INDEX' {
        cpus = 4
        memory = '8.GB'
    }

    withName: 'BWA_MEM' {
        cpus = 8
        memory = '16.GB'
    }

    withName: 'SAMTOOLS_SORT' {
        cpus = 4
        memory = '8.GB'
    }
}

// Execution report options
timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
}

report {
    enabled = true
    file = "${params.outdir}/report.html"
}

trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
}

profiles {
    docker {
        docker.enabled = true
        docker.runOptions = '-u $(id -u):$(id -g)'
    }

    conda {
        conda.enabled = true
        conda.useMicromamba = true
    }
}
